@page "/"
@using Community.Blazor.MapLibre.Models
@using Community.Blazor.MapLibre.Models.Feature
@using Community.Blazor.MapLibre.Models.Layers
@using Community.Blazor.MapLibre.Models.Sources

<PageTitle>Home</PageTitle>


<MapLibre @ref="Map" Options="_mapOptions" Class="rounded-top"
          Height="100vh" @rendermode="InteractiveServer" OnLoad="OnMapLoad"/>

@code
{
    private MapLibre Map { get; set; } = new MapLibre();
    
    private readonly MapOptions _mapOptions = new()
    {
        Container = "UniqueMapId",
        Style = "https://tiles.openfreemap.org/styles/dark",
        Center = new LngLat()
        {
            Latitude = 48.725837, 
            Longitude = 18.752835
        },
        Zoom = 14, // Start with a default zoom level
        Pitch = 20
    };

    private async Task OnMapLoad(EventArgs obj)
    {
        await Map.AddSource("maine", new GeoJsonSource()
{
    Data = new FeatureCollection()
    {
        Features = new List<IFeature>()
        {
            new FeatureFeature()
            {
                Geometry = new PolygonGeometry()
                {
                    Coordinates =
                    [
                        [
                            [18.761708, 48.736246, 398],
                            [18.761741, 48.736241, 398],
                            [18.761773, 48.736402, 397],
                            [18.76184, 48.736748, 397],
                            [18.761969, 48.737189, 398],
                            [18.761939, 48.737199, 398],
                            [18.761773, 48.736559, 397],
                            [18.761725, 48.736327, 397]
                        ]
                    ]
                }
            },
            new FeatureFeature()
            {
                Geometry = new PolygonGeometry()
                {
                    Coordinates =
                    [
                        [
                            [18.761261, 48.736602, 399],
                            [18.761264, 48.736541, 399],
                            [18.76076, 48.736575, 400],
                            [18.760189, 48.736642, 401],
                            [18.759918, 48.73666, 402],
                            [18.759738, 48.736646, 402],
                            [18.75969, 48.736649, 402],
                            [18.759687, 48.736674, 402],
                            [18.759824, 48.736695, 402],
                            [18.759971, 48.736683, 402],
                            [18.760202, 48.736676, 401],
                            [18.760245, 48.736679, 401],
                            [18.760419, 48.73666, 401],
                            [18.760636, 48.736617, 400],
                            [18.760846, 48.736605, 400],
                            [18.761012, 48.736596, 399],
                            [18.761127, 48.736602, 399],
                            [18.761189, 48.736626, 399]
                        ]
                    ]
                }
            },
            new FeatureFeature()
            {
                Geometry = new PolygonGeometry()
                {
                    Coordinates =
                    [
                        [
                            [18.761264, 48.736499, 399],
                            [18.761267, 48.736449, 399],
                            [18.760765, 48.73651, 400],
                            [18.760484, 48.736533, 400],
                            [18.760113, 48.736571, 401],
                            [18.759939, 48.736593, 402],
                            [18.759829, 48.736626, 402],
                            [18.759792, 48.73663, 402],
                            [18.759931, 48.736632, 402],
                            [18.760132, 48.736614, 401],
                            [18.760272, 48.736589, 401],
                            [18.760387, 48.736582, 401],
                            [18.760529, 48.736566, 400],
                            [18.760698, 48.736548, 400],
                            [18.760832, 48.736541, 400],
                            [18.761058, 48.736522, 399],
                            [18.761194, 48.736504, 399]
                        ]
                    ]
                }
            },
            new FeatureFeature()
            {
                Geometry = new PolygonGeometry()
                {
                    Coordinates =
                    [
                        [
                            [18.758386, 48.736823, 404],
                            [18.758783, 48.736766, 405],
                            [18.759226, 48.736724, 404],
                            [18.759502, 48.736695, 403],
                            [18.759714, 48.736729, 403],
                            [18.759765, 48.736731, 403],
                            [18.759478, 48.736745, 404],
                            [18.759126, 48.73677, 404],
                            [18.75874, 48.736798, 405],
                            [18.758547, 48.736835, 404],
                            [18.758469, 48.736851, 406]
                        ]
                    ]
                }
            },
            new FeatureFeature()
            {
                Geometry = new PolygonGeometry()
                {
                    Coordinates =
                    [
                        [
                            [18.756106, 48.737419, 409],
                            [18.756914, 48.737102, 407],
                            [18.757442, 48.736904, 407],
                            [18.757764, 48.736853, 405],
                            [18.758016, 48.736846, 405],
                            [18.75823, 48.73684, 405],
                            [18.75837, 48.736826, 404],
                            [18.75837, 48.736814, 404],
                            [18.758166, 48.73683, 405],
                            [18.757858, 48.736837, 405],
                            [18.757538, 48.736874, 405],
                            [18.757265, 48.736955, 406],
                            [18.756675, 48.737182, 407],
                            [18.756136, 48.737385, 409]
                        ]
                    ]
                }
            },
            new FeatureFeature()
            {
                Geometry = new PolygonGeometry()
                {
                    Coordinates =
                    [
                        [
                            [18.755462, 48.738742, 419],
                            [18.755792, 48.738719, 420],
                            [18.755865, 48.738503, 419],
                            [18.75546, 48.738551, 419],
                            [18.755454, 48.738707, 419]
                        ]
                    ]
                }
            },
            new FeatureFeature()
            {
                Geometry = new PolygonGeometry()
                {
                    Coordinates =
                    [
                        [
                            [18.750677, 48.73752, 423],
                            [18.750956, 48.738114, 426],
                            [18.751292, 48.738436, 427],
                            [18.751782, 48.738781, 428],
                            [18.752236, 48.738998, 427],
                            [18.752584, 48.739032, 424],
                            [18.75296, 48.739014, 422],
                            [18.753169, 48.739023, 421],
                            [18.753365, 48.739048, 421],
                            [18.753521, 48.739062, 420],
                            [18.753679, 48.73914, 421],
                            [18.753891, 48.739143, 421],
                            [18.754057, 48.739135, 421],
                            [18.754325, 48.739113, 420],
                            [18.754548, 48.739103, 421],
                            [18.754714, 48.739105, 421],
                            [18.754883, 48.739071, 420],
                            [18.755159, 48.739018, 421],
                            [18.755315, 48.738959, 421],
                            [18.755296, 48.738921, 420],
                            [18.755095, 48.738988, 419],
                            [18.754813, 48.739044, 420],
                            [18.754679, 48.739069, 420],
                            [18.754529, 48.739062, 420],
                            [18.754285, 48.739083, 420],
                            [18.754062, 48.739097, 420],
                            [18.753872, 48.739105, 420],
                            [18.753703, 48.739101, 420],
                            [18.753588, 48.739048, 420],
                            [18.753459, 48.739013, 421],
                            [18.753242, 48.739004, 421],
                            [18.753097, 48.738982, 421],
                            [18.752794, 48.738977, 423],
                            [18.752525, 48.738975, 425],
                            [18.752351, 48.738963, 426],
                            [18.75223, 48.738933, 426],
                            [18.751965, 48.738795, 427],
                            [18.75152, 48.738489, 427],
                            [18.751278, 48.738301, 426],
                            [18.751061, 48.738094, 425],
                            [18.75093, 48.73788, 423],
                            [18.75072, 48.737513, 424]
                        ]
                    ]
                }
            },
            new FeatureFeature()
            {
                Geometry = new PolygonGeometry()
                {
                    Coordinates =
                    [
                        [
                            [18.753261, 48.73883, 420],
                            [18.753441, 48.738886, 419],
                            [18.75346, 48.738927, 420],
                            [18.753677, 48.738996, 419],
                            [18.754122, 48.738975, 419],
                            [18.754015, 48.738934, 419],
                            [18.753961, 48.738922, 419],
                            [18.753752, 48.738883, 419],
                            [18.753594, 48.738832, 419],
                            [18.753363, 48.73874, 420],
                            [18.753283, 48.738819, 420]
                        ]
                    ]
                }
            },
            new FeatureFeature()
            {
                Geometry = new PolygonGeometry()
                {
                    Coordinates =
                    [
                        [
                            [18.752048, 48.737147, 430],
                            [18.75193, 48.737264, 427],
                            [18.751906, 48.737407, 424],
                            [18.752024, 48.737411, 424],
                            [18.75208, 48.73736, 426],
                            [18.752171, 48.737229, 430],
                            [18.752072, 48.737163, 430]
                        ]
                    ]
                }
            },
            new FeatureFeature()
            {
                Geometry = new PolygonGeometry()
                {
                    Coordinates =
                    [
                        [
                            [18.755593, 48.736605, 416],
                            [18.755797, 48.736587, 415],
                            [18.755797, 48.736571, 415],
                            [18.755735, 48.736562, 415],
                            [18.755622, 48.736587, 415]
                        ]
                    ]
                }
            },
            new FeatureFeature()
            {
                Geometry = new PolygonGeometry()
                {
                    Coordinates =
                    [
                        [
                            [18.755845, 48.736559, 414],
                            [18.755885, 48.736557, 414],
                            [18.755869, 48.736469, 413],
                            [18.756094, 48.736444, 412],
                            [18.755966, 48.736389, 413],
                            [18.755858, 48.736432, 413],
                            [18.75585, 48.736516, 413]
                        ]
                    ]
                }
            },
            new FeatureFeature()
            {
                Geometry = new PolygonGeometry()
                {
                    Coordinates =
                    [
                        [
                            [18.756167, 48.736345, 410],
                            [18.75644, 48.736331, 409],
                            [18.756247, 48.736244, 410],
                            [18.75618, 48.736304, 410]
                        ]
                    ]
                }
            },
            new FeatureFeature()
            {
                Geometry = new PolygonGeometry()
                {
                    Coordinates =
                    [
                        [
                            [18.75321, 48.738825, 420],
                            [18.753291, 48.738733, 420],
                            [18.753022, 48.738626, 419],
                            [18.752942, 48.73871, 420],
                            [18.752459, 48.73852, 422],
                            [18.752588, 48.738471, 421],
                            [18.752588, 48.738434, 421],
                            [18.752639, 48.738414, 419],
                            [18.752883, 48.738487, 419],
                            [18.753122, 48.738568, 419],
                            [18.753275, 48.738642, 419],
                            [18.753358, 48.738733, 419],
                            [18.753245, 48.73883, 420]
                        ]
                    ]
                }
            },
            new FeatureFeature()
            {
                Geometry = new PolygonGeometry()
                {
                    Coordinates =
                    [
                        [
                            [18.751652, 48.737754, 420],
                            [18.751877, 48.737818, 419],
                            [18.752092, 48.737866, 419],
                            [18.752317, 48.737906, 418],
                            [18.752371, 48.737892, 418],
                            [18.752384, 48.73786, 418],
                            [18.752116, 48.737834, 419],
                            [18.751941, 48.737814, 419],
                            [18.751654, 48.737756, 420]
                        ]
                    ]
                }
            },
            new FeatureFeature()
            {
                Geometry = new PolygonGeometry()
                {
                    Coordinates =
                    [
                        [
                            [18.752505, 48.737869, 418],
                            [18.752505, 48.737922, 418],
                            [18.752601, 48.737968, 417],
                            [18.752633, 48.737937, 417],
                            [18.752915, 48.738028, 417],
                            [18.753041, 48.738069, 416],
                            [18.753151, 48.738062, 416],
                            [18.753154, 48.738085, 416],
                            [18.753288, 48.738051, 415],
                            [18.753248, 48.73802, 415],
                            [18.75313, 48.737965, 416],
                            [18.75299, 48.737928, 416],
                            [18.752604, 48.737891, 417],
                            [18.752524, 48.73788, 418]
                        ]
                    ]
                }
            },
            new FeatureFeature()
            {
                Geometry = new PolygonGeometry()
                {
                    Coordinates =
                    [
                        [
                            [18.753393, 48.737998, 416],
                            [18.75339, 48.737961, 416],
                            [18.753551, 48.737952, 417],
                            [18.753808, 48.737905, 418],
                            [18.753897, 48.737857, 419],
                            [18.753867, 48.737825, 419],
                            [18.753891, 48.737721, 420],
                            [18.754028, 48.737744, 419],
                            [18.754028, 48.737774, 419],
                            [18.754133, 48.737776, 417],
                            [18.754235, 48.737818, 416],
                            [18.754267, 48.737848, 416],
                            [18.753851, 48.737914, 418],
                            [18.753513, 48.737977, 417]
                        ]
                    ]
                }
            },
            new FeatureFeature()
            {
                Geometry = new PolygonGeometry()
                {
                    Coordinates =
                    [
                        [
                            [18.753894, 48.737703, 420],
                            [18.753908, 48.737632, 421],
                            [18.753854, 48.737625, 421],
                            [18.753854, 48.737611, 421],
                            [18.753835, 48.737611, 421],
                            [18.753854, 48.737542, 421],
                            [18.753881, 48.737491, 421],
                            [18.753991, 48.737524, 419],
                            [18.75413, 48.737553, 418],
                            [18.754133, 48.737648, 418],
                            [18.754127, 48.737714, 417],
                            [18.754095, 48.73774, 417],
                            [18.754023, 48.73774, 419],
                            [18.75391, 48.737722, 420]
                        ]
                    ]
                }
            },
            new FeatureFeature()
            {
                Geometry = new PolygonGeometry()
                {
                    Coordinates =
                    [
                        [
                            [18.754221, 48.737712, 417],
                            [18.754192, 48.737494, 419],
                            [18.754452, 48.737475, 418],
                            [18.754487, 48.737487, 418],
                            [18.754519, 48.737712, 417],
                            [18.754554, 48.737669, 417],
                            [18.754522, 48.737445, 418],
                            [18.754653, 48.737438, 417],
                            [18.754701, 48.737646, 416],
                            [18.754865, 48.737544, 417],
                            [18.754862, 48.737505, 417],
                            [18.754841, 48.737508, 417],
                            [18.754798, 48.737335, 416],
                            [18.754728, 48.737243, 418],
                            [18.75461, 48.737278, 418],
                            [18.754366, 48.737349, 419],
                            [18.754162, 48.737413, 420],
                            [18.754173, 48.737574, 418],
                            [18.7542, 48.737737, 417],
                            [18.754299, 48.737816, 416],
                            [18.754404, 48.737825, 415],
                            [18.754492, 48.737804, 414],
                            [18.754506, 48.737754, 416],
                            [18.755037, 48.737606, 414],
                            [18.755021, 48.737542, 416],
                            [18.754999, 48.73753, 416],
                            [18.75486, 48.737539, 417],
                            [18.754701, 48.737645, 416],
                            [18.754554, 48.737666, 417],
                            [18.754524, 48.73771, 417],
                            [18.75424, 48.737735, 417]
                        ]
                    ]
                }
            },
            new FeatureFeature()
            {
                Geometry = new PolygonGeometry()
                {
                    Coordinates =
                    [
                        [
                            [18.752021, 48.73714, 430],
                            [18.751855, 48.737034, 431],
                            [18.751533, 48.737062, 431],
                            [18.751474, 48.737147, 429],
                            [18.751458, 48.737317, 425],
                            [18.751023, 48.737296, 426],
                            [18.751029, 48.737324, 426],
                            [18.751227, 48.737338, 426],
                            [18.751227, 48.737404, 425],
                            [18.751211, 48.737483, 423],
                            [18.751251, 48.73751, 423],
                            [18.751278, 48.737395, 424],
                            [18.751466, 48.737377, 424],
                            [18.751691, 48.737388, 424],
                            [18.751857, 48.737414, 424],
                            [18.751898, 48.737262, 427],
                            [18.752016, 48.737146, 430]
                        ]
                    ]
                }
            },
            new FeatureFeature()
            {
                Geometry = new PolygonGeometry()
                {
                    Coordinates =
                    [
                        [
                            [18.752517, 48.737464, 425],
                            [18.752531, 48.737331, 428],
                            [18.752681, 48.73728, 428],
                            [18.752971, 48.737153, 429],
                            [18.753126, 48.737139, 429],
                            [18.753657, 48.737093, 426],
                            [18.753647, 48.73739, 424],
                            [18.753748, 48.737388, 423],
                            [18.753748, 48.737404, 422],
                            [18.753786, 48.737404, 423],
                            [18.753786, 48.737395, 423],
                            [18.753885, 48.737395, 422],
                            [18.753813, 48.737487, 422],
                            [18.753797, 48.737606, 422],
                            [18.75363, 48.737595, 423],
                            [18.753467, 48.737552, 423],
                            [18.75322, 48.737535, 424],
                            [18.753081, 48.737499, 424],
                            [18.752713, 48.737468, 425],
                            [18.752676, 48.73746, 425],
                            [18.7526, 48.737471, 425]
                        ]
                    ]
                }
            },
            new FeatureFeature()
            {
                Geometry = new PolygonGeometry()
                {
                    Coordinates =
                    [
                        [
                            [18.755923, 48.736844, 414],
                            [18.755896, 48.736831, 414],
                            [18.755856, 48.736906, 414],
                            [18.756076, 48.736778, 413],
                            [18.755998, 48.736785, 413],
                            [18.755923, 48.736812, 414],
                            [18.755958, 48.736824, 413]
                        ]
                    ]
                }
            },
            new FeatureFeature()
            {
                Geometry = new PolygonGeometry()
                {
                    Coordinates =
                    [
                        [
                            [18.755995, 48.736246, 412],
                            [18.7561, 48.736161, 411],
                            [18.755805, 48.736032, 412],
                            [18.755974, 48.736233, 412]
                        ]
                    ]
                }
            },
            new FeatureFeature()
            {
                Geometry = new PolygonGeometry()
                {
                    Coordinates =
                    [
                        [
                            [18.755786, 48.736026, 412],
                            [18.755547, 48.736131, 414],
                            [18.755518, 48.736129, 414],
                            [18.755507, 48.736094, 414],
                            [18.755542, 48.736023, 413],
                            [18.755647, 48.735965, 412],
                            [18.755756, 48.735982, 413]
                        ]
                    ]
                }
            },
            new FeatureFeature()
            {
                Geometry = new PolygonGeometry()
                {
                    Coordinates =
                    [
                        [
                            [18.75754, 48.736686, 404],
                            [18.757722, 48.736736, 404],
                            [18.757996, 48.736739, 404],
                            [18.758264, 48.736731, 403],
                            [18.758787, 48.736672, 403],
                            [18.759595, 48.73658, 402],
                            [18.759565, 48.736575, 402],
                            [18.759082, 48.736628, 403],
                            [18.758699, 48.736676, 404],
                            [18.758361, 48.736709, 403],
                            [18.758176, 48.736727, 403],
                            [18.757859, 48.736725, 404],
                            [18.757709, 48.736718, 404],
                            [18.757559, 48.736676, 404]
                        ]
                    ]
                }
            }
        }
    }
});


        await Map.AddLayer(new FillLayer()
        {
            Id = "GeoJsonLayerId",
            Source = "maine",
            Paint = new FillLayerPaint()
            {
                FillColor = "#088",
                FillOpacity = 0.8,
                FillOutlineColor = "#008888"
            }
        });
    }
}
